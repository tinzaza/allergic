<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4 bg-light">
<div class="container col-md-8">
    <h2 class="text-center mb-4">Create Account</h2>

        <!-- FLASH MESSAGES -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} text-center">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
    {% endwith %}


    <form method="POST" class="row g-3">

        <!-- ================= STEP 1 ================= -->
        <div id="step1">

            <!-- INTRO -->
            <div class="mb-4 text-center">
                <h4 class="mb-1">Patient Registration</h4>
                <p class="text-muted">
                    Please enter your basic information below.  
                    This information will be used for clinical assessment and follow-up.
                </p>
            </div>

            <!-- ================= ACCOUNT INFORMATION ================= -->
            <h6 class="fw-semibold mb-3">Account Information</h6>

            <div class="row g-3">

                <div class="col-md-6">
                    <label class="form-label">
                        Full Name <span class="required">*</span>
                    </label>
                    <input name="full_name" class="form-control" required>
                    <small class="text-muted">
                        This name will be visible to healthcare providers.
                    </small>
                </div>

                <div class="col-md-6">
                    <label>Username <span class="required-star">*</span></label>
                    <input name="username" class="form-control" required>
                    <small class="text-muted">
                        Used to log in to the system.
                    </small>
                </div>

                <div class="col-md-6">
                    <label>Password <span class="required-star">*</span></label>
                    <input name="password" type="password" class="form-control" required>
                    <small class="text-muted">
                        Choose a secure password.
                    </small>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Role <span class="required-star">*</span></label>
                    <select name="role" id="roleSelect" class="form-select" required>
                        <option value="" disabled selected>Select Role</option>
                        <option value="patient">Patient</option>
                        <option value="doctor">Doctor</option>
                    </select>
                </div>

                <!-- Doctor code -->
                <div class="col-md-6 d-none" id="doctorCodeWrapper">
                    <label class="form-label">Doctor Signup Code</label>
                    <input name="doctor_code" type="password" class="form-control">
                    <small class="text-muted">
                        Required for doctor registration only.
                    </small>
                </div>

            </div>

            <hr class="my-4">

            <!-- ================= PATIENT INFORMATION ================= -->
            <h6 class="fw-semibold mb-3 patient-field">Patient Information</h6>

            <div class="row g-3 patient-field">

                <div class="col-md-6">
                    <label>Email <span class="required-star">*</span></label>
                    <input name="email" type="email" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Phone Number <span class="required-star">*</span></label>
                    <input name="phone" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Address <span class="required-star">*</span></label>
                    <input name="address" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Date of Birth <span class="required-star">*</span></label>
                    <input name="dob" type="date" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Gender <span class="required-star">*</span></label>
                    <select name="gender" class="form-select">
                        <option value="">-</option>
                        <option>Male</option>
                        <option>Female</option>
                        <option>Other</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label>Emergency Contact <span class="required-star">*</span></label>
                    <input name="emergency_contact" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Insurance Provider <span class="required-star">*</span></label>
                    <input name="insurance_provider" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Hospital Number <span class="required-star">*</span></label>
                    <input name="hospital_number" class="form-control">
                </div>

            </div>

            <!-- NEXT BUTTON -->
            <div class="col-12 mt-4 patient-field">
                <button
                    type="button"
                    class="btn btn-primary w-100"
                    onclick="goStep2()"
                >
                    Continue to Symptom & Environment Assessment ‚Üí
                </button>
            </div>

            <!-- LOGIN LINK -->
            <div class="text-center mt-3">
                <a href="{{ url_for('login') }}" class="text-decoration-none">
                    Already have an account? <strong>Log in</strong>
                </a>
            </div>


        </div>

        <!-- ================= STEP 2 ================= -->
<div id="step2" class="d-none">

    <h4 class="mb-2">ü©∫ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°</h4>
    <p class="text-muted mb-4">
        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÇ‡∏£‡∏Ñ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô
    </p>

    <!-- ================= SYMPTOM TRIGGERS ================= -->
    <h5>1) ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠</h5>
    <p class="text-muted small">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÄ‡∏£‡∏¥‡∏ö‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
    </p>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="symptom_worse_morning" value="1">
        <label class="form-check-label">
            ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏ô
            <span class="text-muted small">‚Äì ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏±‡∏î‡∏à‡∏°‡∏π‡∏Å ‡∏à‡∏≤‡∏° ‡∏ô‡πâ‡∏≥‡∏°‡∏π‡∏Å‡πÑ‡∏´‡∏•‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤</span>
        </label>
    </div>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="symptom_worse_exercise" value="1">
        <label class="form-check-label">
            ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
            <span class="text-muted small">‚Äì ‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏¥‡πà‡∏á ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏£‡πá‡∏ß ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏µ‡∏¨‡∏≤</span>
        </label>
    </div>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="symptom_worse_dust" value="1">
        <label class="form-check-label">
            ‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏ù‡∏∏‡πà‡∏ô
            <span class="text-muted small">‚Äì ‡∏ù‡∏∏‡πà‡∏ô‡∏ö‡πâ‡∏≤‡∏ô ‡∏ù‡∏∏‡πà‡∏ô‡∏ñ‡∏ô‡∏ô ‡πÑ‡∏£‡∏ù‡∏∏‡πà‡∏ô</span>
        </label>
    </div>

    <input class="form-control mt-2"
           name="symptom_worse_other"
           placeholder="‡∏≠‡∏∑‡πà‡∏ô ‡πÜ (‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡∏¥‡πà‡∏ô ‡∏Ñ‡∏ß‡∏±‡∏ô ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ)">

    <hr>

    <!-- ================= SEASON ================= -->
    <h5>‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡πÄ‡∏£‡∏¥‡∏ö</h5>
    <p class="text-muted small">
        ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏Ç‡πâ‡∏≠ ‡∏´‡∏≤‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏ß‡∏á
    </p>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="season_summer" value="1">
        <label class="form-check-label">‡∏§‡∏î‡∏π‡∏£‡πâ‡∏≠‡∏ô</label>
    </div>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="season_rainy" value="1">
        <label class="form-check-label">‡∏§‡∏î‡∏π‡∏ù‡∏ô</label>
    </div>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="season_winter" value="1">
        <label class="form-check-label">‡∏§‡∏î‡∏π‡∏´‡∏ô‡∏≤‡∏ß</label>
    </div>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="season_all_year" value="1">
        <label class="form-check-label">‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏•‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ</label>
    </div>

    <div class="form-check">
        <input class="form-check-input" type="checkbox" name="season_change" value="1">
        <label class="form-check-label">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏§‡∏î‡∏π</label>
    </div>

    <hr>

    <!-- ================= DURATION ================= -->
    <label class="mt-2 fw-semibold">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ô 1 ‡∏õ‡∏µ</label>
    <p class="text-muted small">
        ‡∏ô‡∏±‡∏ö‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏£‡∏≠‡∏ö 1 ‡∏õ‡∏µ
    </p>
    <select class="form-select" name="duration_per_year">
        <option value="">-</option>
        <option>‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡∏õ‡∏µ</option>
        <option>1‚Äì4 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡∏õ‡∏µ</option>
        <option>‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 4 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡∏õ‡∏µ</option>
    </select>

    <label class="mt-3 fw-semibold">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</label>
    <p class="text-muted small">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
    </p>
    <select class="form-select" name="weekly_frequency">
        <option value="">-</option>
        <option>‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 3 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</option>
        <option>‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 4 ‡∏ß‡∏±‡∏ô/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ</option>
    </select>

    <hr>

    <!-- ================= ENVIRONMENT ================= -->
    <h5>2) ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢</h5>
    <p class="text-muted small">
        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°
    </p>

    <label class="fw-semibold">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢</label>
    <select class="form-select" name="living_area">
        <option value="">-</option>
        <option>‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á</option>
        <option>‡∏ä‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á</option>
        <option>‡∏ô‡∏≠‡∏Å‡πÄ‡∏°‡∏∑‡∏≠‡∏á</option>
    </select>

    <div class="form-check mt-2">
        <input type="checkbox" class="form-check-input" name="near_road" value="1">
        <label class="form-check-label">
            ‡∏ö‡πâ‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏ô‡∏ô‡πÉ‡∏´‡∏ç‡πà
            <span class="text-muted small">‚Äì ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ù‡∏∏‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏•‡∏û‡∏¥‡∏©</span>
        </label>
    </div>

    <label class="mt-3 fw-semibold">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢</label>
    <select class="form-select" name="housing_type">
        <option value="">-</option>
        <option>‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</option>
        <option>‡∏ó‡∏≤‡∏ß‡∏ô‡πå‡πÄ‡∏Æ‡∏≤‡∏™‡πå</option>
        <option>‡πÅ‡∏ü‡∏•‡∏ï</option>
        <option>‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î</option>
    </select>

    <div class="form-check mt-2">
        <input type="checkbox" class="form-check-input" name="air_conditioner" value="1">
        <label class="form-check-label">
            ‡∏°‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô
        </label>
    </div>

    <label class="mt-3 fw-semibold">‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</label>
    <p class="text-muted small">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥
    </p>
    <select class="form-select" name="pet">
        <option>‡πÑ‡∏°‡πà‡∏°‡∏µ</option>
        <option>‡πÅ‡∏°‡∏ß</option>
        <option>‡∏™‡∏∏‡∏ô‡∏±‡∏Ç</option>
        <option>‡∏ô‡∏Å</option>
        <option>‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
    </select>

    <div class="d-flex gap-2 mt-4">
        <button type="button"
                class="btn btn-outline-secondary w-50"
                onclick="goStep1()">‚Üê Back</button>
        <button type="submit"
                class="btn btn-success w-50">
            Submit
        </button>
    </div>
</div>

<script>
function refreshRoleFields() {
    const role = document.getElementById("roleSelect").value;
    const doctor = document.getElementById("doctorCodeWrapper");
    const patient = document.querySelectorAll(".patient-field");

    if (role === "doctor") {
        doctor.classList.remove("d-none");
        patient.forEach(f => f.classList.add("d-none"));
    } else {
        doctor.classList.add("d-none");
        patient.forEach(f => f.classList.remove("d-none"));
    }
}

function goStep2() {
    document.getElementById("step1").classList.add("d-none");
    document.getElementById("step2").classList.remove("d-none");
}

function goStep1() {
    document.getElementById("step2").classList.add("d-none");
    document.getElementById("step1").classList.remove("d-none");
}

document.getElementById("roleSelect").addEventListener("change", refreshRoleFields);
refreshRoleFields();
</script>

</body>
</html>
